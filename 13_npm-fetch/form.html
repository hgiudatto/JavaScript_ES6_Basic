<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/node-fetch@3.3.1/src/index.min.js"
    ></script>
    <script>
      // https://www.memberstack.com/blog/node-http-request
      // https://stackabuse.com/making-asynchronous-http-requests-in-javascript-with-axios/

      const rickMortyResources = async () => {
        const response = await fetch("https://rickandmortyapi.com/api");
        const data = await response.json();
        console.log(`All available API's resources: `, data);
      };
      rickMortyResources();

      const rickMortyCharacters = async () => {
        const response = await fetch(
          "https://rickandmortyapi.com/api/character"
        );
        const data = await response.json();
        console.log(`Info and Pagination: `, data);
      };
      rickMortyCharacters();

      const rickMortyCharactersPage = async () => {
        const response = await fetch(
          "https://rickandmortyapi.com/api/character/?page=5"
        );
        const data = await response.json();
        console.log(`Info and Pagination page no.5: `, data);
      };
      rickMortyCharactersPage();

      const rickMortyCharacter = async () => {
        const response = await fetch(
          `https://rickandmortyapi.com/api/character`
        );
        const data = await response.json();
        console.log(`Get character 5: `, data);
      };
      rickMortyCharacter();

      const rickMortyCharacterByName = async (charName) => {
        let url = `https://rickandmortyapi.com/api/character/?name=${charName}`
        console.log(`url: ${url}`);
        const response = await fetch(
          `https://rickandmortyapi.com/api/character/?name=${charName}`
        );
        const data = await response.json();
        return data;
      };

      const rickMortyMultipleCharacters = async () => {
        const response = await fetch(
          "https://rickandmortyapi.com/api/character/6,29,301"
        );
        const data = await response.json();
        console.log(`Get multiple characters: `, data);
      };
      rickMortyMultipleCharacters();

      const rickMortyFilteredCharacters = async () => {
        const response = await fetch(
          "https://rickandmortyapi.com/api/character/?name=abradolf&status=alive"
        );
        const data = await response.json();
        console.log(`Get filtered characters: `, data);
      };
      rickMortyFilteredCharacters();

      const rickMortyEpisodes = async () => {
        const response = await fetch("https://rickandmortyapi.com/api/episode");
        const data = await response.json();
        console.log(`The list of episodes: `, data);
      };
      rickMortyEpisodes();

      const data = {
        name: "victor",
        job: "writer",
      };

      const addUser = async (data) => {
        const response = await fetch("https://reqres.in/api/users", {
          method: "post",
          body: JSON.stringify(data),
        });

        const dataResp = await response.json();
        console.log(`User created: ` ,dataResp);
      };

      addUser();

      const showRickMortyChar = async (e) => {
        let characterName = document.getElementById('nickName').value;
        const rickMortyChar = await rickMortyCharacterByName(characterName);
        console.log(`rickMortyChar: `, rickMortyChar.results[0].name);
        console.log(`rickMortyChar: `, rickMortyChar.results[0].image);
        document.getElementById('rmImg').src = `${rickMortyChar.results[0].image}`;
        document.getElementById('rmName').value = `${rickMortyChar.results[0].name}`;
      }
    </script>
    <title>Rick & Morty Character Search</title>
  </head>
  <body>
    <section class="registry-section">
      <div class="form-container">
        <div class="form-header">
          <h2>Rick Morty Character</h2>
          <br/>
        </div>
          <div class="form-box">
            <label for="nickName">Name</label>
            <input
              type="text"
              name="nickName"
              id="nickName"
              placeholder="Enter a character"
            />
          </div>
          <br/>
          <button id="submit-btn" onclick="showRickMortyChar()">Enviar</button>
          <br/>
          <img src="" id="rmImg">
          <br/>
          <input id="rmName" type="text" value="" disabled>
      </div>
    </section>
  </body>
</html>
